import{u as q,a as z,r,F as A,W as B,j as s,S as H}from"./index-134f4196.js";function M(){var j,N;const{seriesId:d}=q(),w=z(),{wordFavorites:y,addWordFavorite:S,removeWordFavorite:k}=r.useContext(A),{setWords:E,setSeriesId:$}=r.useContext(B),[l,C]=r.useState(null),[_,F]=r.useState(!0),[v,I]=r.useState(null),[a,W]=r.useState([]),[o,f]=r.useState(0),[x,h]=r.useState([]),[c,i]=r.useState(0),[m,D]=r.useState("easy");if(r.useEffect(()=>{async function e(){try{const n=await(await fetch(`/episodes/${d}.json`)).json();C(n);const g=Object.keys(n);W(g),h(Object.keys(n[g[0]]||{}))}catch(t){console.error("Error loading episodes:",t),I("שגיאה בטעינת פרקים")}finally{F(!1)}}e()},[d]),r.useEffect(()=>{if(l&&a.length>0){const e=a[o];h(Object.keys(l[e]||{})),i(0)}},[o,l]),_)return s.jsx(H,{});if(v)return s.jsx("p",{className:"text-red-500 text-center mt-10",children:v});if(!l)return null;const u=a[o],b=x[c],p=((N=(j=l[u])==null?void 0:j[b])==null?void 0:N[m])||[],P=()=>{if(c<x.length-1)i(c+1);else if(o<a.length-1){const e=o+1;f(e),h(Object.keys(l[a[e]]||{})),i(0)}},G=()=>{if(c>0)i(c-1);else if(o>0){const e=o-1;f(e),h(Object.keys(l[a[e]]||{})),i(x.length-1)}},K=e=>{const t=`${d}_${u}_${b}_${m}_${e.word}`;y.some(n=>n.key===t)?k(t):S(t,e)},L=()=>{E(p),$(d),w("/games")};return s.jsxs("div",{className:"min-h-screen p-8 bg-gradient-to-br from-gray-100 to-blue-50 flex flex-col items-center",dir:"rtl",children:[s.jsx("h2",{className:"text-4xl font-bold text-center mb-10 text-blue-800",children:"בחרו עונה ופרק לצפייה ולמידת מילים"}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-12 mb-10",children:[s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-700",children:"בחר עונה 🎬"}),s.jsx("div",{className:"relative w-32 h-48 overflow-hidden rounded-2xl shadow-md border border-gray-300 bg-white",children:s.jsx("div",{className:"overflow-y-scroll h-full scrollbar-hide",children:a.map((e,t)=>s.jsx("div",{onClick:()=>f(t),className:`h-12 flex items-center justify-center cursor-pointer text-lg font-bold transition-colors ${t===o?"bg-blue-200 text-blue-800":"text-gray-500 hover:bg-gray-100"}`,children:e.replace("season-","עונה ")},e))})})]}),s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-700",children:"בחר פרק 🎞️"}),s.jsx("div",{className:"relative w-32 h-48 overflow-hidden rounded-2xl shadow-md border border-gray-300 bg-white",children:s.jsx("div",{className:"overflow-y-scroll h-full scrollbar-hide",children:x.map((e,t)=>s.jsx("div",{onClick:()=>i(t),className:`h-12 flex items-center justify-center cursor-pointer text-lg font-bold transition-colors ${t===c?"bg-green-200 text-green-800":"text-gray-500 hover:bg-gray-100"}`,children:e.replace("episode-","פרק ")},e))})})]})]}),s.jsxs("div",{className:"flex gap-6 mb-8",children:[s.jsx("button",{onClick:G,className:"bg-gray-300 hover:bg-gray-400 px-6 py-2 rounded-full shadow text-gray-700 font-semibold transition",children:"⬅️ קודם"}),s.jsx("button",{onClick:P,className:"bg-gray-300 hover:bg-gray-400 px-6 py-2 rounded-full shadow text-gray-700 font-semibold transition",children:"הבא ➡️"})]}),s.jsx("div",{className:"flex gap-4 mb-10",children:["easy","medium","hard"].map(e=>s.jsx("button",{onClick:()=>D(e),className:`px-6 py-2 rounded-full font-bold transition-all ${m===e?"bg-blue-600 text-white":"bg-white text-blue-600 border border-blue-400"}`,children:e==="easy"?"קל":e==="medium"?"בינוני":"קשה"},e))}),p.length>0?s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-8 w-full max-w-4xl",children:p.map((e,t)=>{const n=`${d}_${u}_${b}_${m}_${e.word}`,g=y.some(R=>R.key===n);return s.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-lg hover:shadow-2xl transition border border-gray-200 flex flex-col items-center text-center relative",children:[s.jsx("button",{className:"absolute top-4 left-4 text-2xl",onClick:()=>K(e),children:g?"💖":"🤍"}),s.jsx("h4",{className:"text-2xl font-bold text-blue-700 mb-2",children:e.word}),s.jsx("p",{className:"text-lg text-gray-600 mb-2",children:e.translate}),s.jsx("p",{className:"text-gray-500 italic",dir:"ltr",children:e.sentence})]},t)})}):s.jsx("p",{className:"text-center text-gray-500 mt-8 text-lg",children:"אין מילים ברמה זו לפרק הנבחר."}),s.jsx("div",{className:"mt-14",children:s.jsx("button",{onClick:L,className:"bg-gradient-to-r from-green-400 to-blue-500 hover:from-green-500 hover:to-blue-600 text-white font-bold py-4 px-10 rounded-full text-2xl shadow-lg transition-all",children:"🎮 רוצה לשחק במשחקים על המילים שלמדת?"})})]})}export{M as default};
