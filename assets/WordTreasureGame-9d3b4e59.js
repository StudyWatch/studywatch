import{r as s,W as y,a as k,j as t}from"./index-e7a31265.js";import{G as C}from"./GamePage-9e97f02f.js";function M(){const{words:c}=s.useContext(y),m=k(),[n,g]=s.useState([]),[o,b]=s.useState(null),[p,w]=s.useState([]),[a,x]=s.useState(null),[d,j]=s.useState(0),[i,f]=s.useState(!1);s.useEffect(()=>{c.length>0&&g(u([...c]))},[c]),s.useEffect(()=>{n.length===0&&o&&setTimeout(()=>{m("/game-end",{state:{score:d,fromGame:"/games/word-treasure"}})},1200)},[n,o,m,d]);const u=e=>[...e].sort(()=>Math.random()-.5),h=()=>{i||n.length===0||(f(!0),x(null),setTimeout(()=>{const e=Math.floor(Math.random()*n.length),r=n[e],N=u(c.filter(l=>l.word!==r.word)).slice(0,2),S=u([{content:r.translate,correct:!0},...N.map(l=>({content:l.translate,correct:!1}))]);b(r),w(S),g(l=>l.filter((T,W)=>W!==e)),f(!1)},1200))},v=e=>{a||i||(x(e),e.correct&&j(r=>r+10),setTimeout(()=>{h()},1200))};return t.jsx(C,{title:"🎡 גלגל האוצר - Word Treasure",backgroundImage:"/images/backgrounds/word-treasure.jpg",children:t.jsxs("div",{className:"flex flex-col items-center gap-8 mt-8",children:[t.jsx("div",{className:`w-32 h-32 bg-gradient-to-tr from-yellow-300 to-pink-400 rounded-full flex items-center justify-center text-5xl font-bold text-white shadow-2xl ${i?"animate-spin-slow":""}`,children:"🎡"}),!o&&n.length>0&&t.jsx("button",{onClick:h,className:"mt-6 bg-gradient-to-r from-green-400 to-blue-500 hover:from-green-500 hover:to-blue-600 text-white font-bold py-3 px-10 rounded-full text-xl transition-all shadow-md",children:"🎯 התחל לשחק"}),o&&!i&&t.jsxs(t.Fragment,{children:[t.jsx("h2",{className:"text-2xl font-bold text-blue-800",children:o.word}),t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mt-4",children:p.map((e,r)=>t.jsx("button",{onClick:()=>v(e),className:`py-3 px-6 rounded-full font-bold text-lg transition-all shadow-md ${a?e.correct?"bg-green-400 text-white":e.content===(a==null?void 0:a.content)?"bg-red-400 text-white":"bg-gray-300 text-gray-700":"bg-blue-100 hover:bg-blue-200 text-blue-700"}`,children:e.content},r))})]}),t.jsxs("div",{className:"mt-10 text-lg text-gray-700",children:["ניקוד: ",t.jsx("span",{className:"font-bold text-blue-700",children:d})]})]})})}export{M as default};
